---
layout: post
title : "COFO::1610C Keshi Is Throwing a Party"
subtitle: "cofo problem"
type: "codeforce 1600"
ps: true
cofo: true
cofoeach: true
text: true
author: "beenpow"
post-header: true
header-img: "data:image/png;base64,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"
order: 1
date: "2022-07-31"
---
# COFO::1610C Keshi Is Throwing a Party
- [Link : COFO::1610C](https://codeforces.com/contest/1610/problem/C)


## Problem 

- level : 1600
- tag : binary search, greedy
- TIME
  - to understand    : 
  - to algorithm     : fail
  - to code          : 
  - to debug         : 
  - understanding edit : 20
- 해당 유형의 문제에서 선택될 갯수를 미리 fix하는건 상상하지 못했습니다.
- 단순한 인덱스 조작으로 오인했습니다.

### Point
- n명의 사람이 주어집니다.
- i번째 사람은 i달러를 들고 있고 2개의 팩터를 보유합니다.
- a[i] : i번째 사람은 자신보다 돈이 많은 사람이 파티에 최대 a[i]명일때 파티에 참여합니다.
- b[i] : i번째 사람은 자신보다 돈이 없는 사람이 파티에 최대 b[i]명일때 파티에 참여합니다.
- 파티에 참여하는 사람의 최대 수를 구하시오.

### Design
- 이 문제같은 유형에 binary search를 예상하지 못했습니다.
- bs 가 가능한 이유는 사람 수를 정했을때, 올 수 있는 사람의 수를 o(N) 내에 구할 수 있기 때문입니다.
- 이 로직이 매우 흥미롭습니다.
- 파티에 오는 사람의 리스트를 p1, p2, p3, ... px 로 x명이라고 합시다.
  - 저는 이 리스트를 구하기 위해서 two pointer 처럼 풀어야하나? 라는 생각을 했습니다.
- O(N)내에 가능한 이유는 다음과 같습니다.
- p1 즉 돈이 제일 적은 사람의 a값은 x-1이상이어야하고, b값은 0이상이어야합니다.
  - 즉, p1보다 x-1명이 남았기 때문이죠.
- p2 즉, 돈이 두번째로 적은 사람의 a값은 x-2이상이어야하고, b값은 1이상이어야합니다.
  - 즉, p2보다 x-2명이 남았기 때문이죠.
  - 그리고, p2밑에는 1명이 있구요
- ...
- 이 방법으로 O(N)내에 특정 인원수가 가능한지 여부를 체크할 수 있습니다.
- 간단해보이지만, 문제를 푸는 입장에서는 잘 보이지 않는 로직입니다.

### Complexity
- O(NlogN)

### Code

```cpp
#include<bits/stdc++.h>
#define all(a) a.begin(), a.end()
#define sz(a) (int) a.size()
#define rep(i, a, b) for(int i=(a); i <(b); i++)
#define r_rep(i, a, b) for(int i=(a); i >(b); i--)
typedef long long ll;

using namespace std;
const int MAXN = 2 * 1e5 + 9;

int n;
int a[MAXN], b[MAXN];

void bs(ll st, ll en) {
    
    auto possible = [](ll x) {
        ll cnt = 0;
        rep(i, 0, n) {
            if(a[i] >= x - 1 - cnt && b[i] >= cnt) cnt++;
        }
        return cnt >= x;
    };
    
    ll ans = 0;
    while(st <= en) {
        ll mid = (st + en) >> 1;
        if(possible(mid)) {
            ans = max(ans, mid);
            st = mid + 1;
        } else en = mid - 1;
    }
    cout << ans << '\n';
}
void solve() {
    cin >> n;
    rep(i, 0, n) cin >> a[i] >> b[i];
    
    bs(0, n);
}
int main(){
    ios_base::sync_with_stdio(0); cin.tie(0);
    int tc; cin >> tc;
    while(tc--)
        solve();
    return 0;
}
```
